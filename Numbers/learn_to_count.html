<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Learn to Count - Interactive Counting</title>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            color: #667eea;
            padding: 12px 24px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', 'Arial', sans-serif;
            font-weight: 700;
            font-size: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .home-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
            background: #667eea;
            color: white;
        }

        .activity-card {
            background: white;
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            display: none;
        }

        .activity-card.active {
            display: block;
        }

        .level-badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .instruction {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 28px;
            font-weight: 800;
            color: #2d3748;
            margin-bottom: 30px;
        }

        .speaker-icon {
            font-size: 32px;
            cursor: pointer;
        }

        .objects-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin: 40px 0;
            min-height: 200px;
        }

        .object-wrapper {
            position: relative;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .object-wrapper:hover {
            transform: scale(1.05);
        }

        .object-wrapper.counted {
            cursor: default;
        }

        .object {
            font-size: 80px;
            filter: grayscale(0%);
            transition: filter 0.3s;
        }

        .object-wrapper.counted .object {
            filter: grayscale(50%) brightness(0.9);
        }

        .count-number {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #667eea;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 800;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            animation: popIn 0.3s ease;
        }

        .object-wrapper.counted .count-number {
            display: flex;
        }

        @keyframes popIn {
            0% {
                transform: translate(-50%, -50%) scale(0);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .answer-container {
            background: #f7fafc;
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 30px;
        }

        .answer-prompt {
            text-align: center;
            font-size: 20px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .number-options {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .number-button {
            background: linear-gradient(135deg, #4299e1 0%, #2b6cb0 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 70px;
            height: 70px;
            font-size: 32px;
            font-weight: 800;
            font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', 'Arial', sans-serif;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(66, 153, 225, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .number-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(66, 153, 225, 0.4);
        }

        .number-button.selected {
            background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);
            box-shadow: 0 6px 16px rgba(237, 137, 54, 0.4);
        }

        .submit-button {
            background: linear-gradient(135deg, #7ed321 0%, #5fa319 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 16px 48px;
            font-size: 24px;
            font-weight: 800;
            font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', 'Arial', sans-serif;
            cursor: pointer;
            box-shadow: 0 6px 16px rgba(126, 211, 33, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
            display: block;
            margin: 20px auto 0;
        }

        .submit-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(126, 211, 33, 0.4);
        }

        .feedback-message {
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 22px;
            font-weight: 700;
            text-align: center;
            margin-top: 20px;
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .feedback-message.correct {
            background: #c6f6d5;
            color: #22543d;
            border: 3px solid #48bb78;
        }

        .feedback-message.wrong {
            background: #fed7d7;
            color: #742a2a;
            border: 3px solid #fc8181;
        }

        .feedback-message.show {
            display: block;
        }

        .level-complete {
            background: #bee3f8;
            color: #2c5282;
            border: 3px solid #4299e1;
            padding: 30px;
            border-radius: 16px;
            text-align: center;
            margin-top: 30px;
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .level-complete.show {
            display: block;
        }

        .level-complete h2 {
            font-size: 32px;
            margin-bottom: 15px;
        }

        .level-complete p {
            font-size: 20px;
            margin-bottom: 20px;
        }

        .next-level-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 16px 48px;
            font-size: 24px;
            font-weight: 800;
            font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', 'Arial', sans-serif;
            cursor: pointer;
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .next-level-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .completion-message {
            background: #fef5e7;
            border: 3px solid #f39c12;
            padding: 40px;
            border-radius: 16px;
            text-align: center;
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .completion-message.show {
            display: block;
        }

        .completion-message h1 {
            font-size: 48px;
            color: #d68910;
            margin-bottom: 20px;
        }

        .completion-message p {
            font-size: 24px;
            color: #7d6608;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .activity-card {
                padding: 24px;
            }

            .instruction {
                font-size: 22px;
            }

            .object {
                font-size: 60px;
            }

            .count-number {
                width: 40px;
                height: 40px;
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
<button class="home-button" onclick="window.location.href='../math-index.html'">
<span>ğŸ </span>
<span>Home</span>
</button>
<div class="container">
<!-- Level 1: Count 1-3 -->
<div class="activity-card active" data-level="1" data-max="3">
<div class="level-badge">LEVEL 1: Count up to 3</div>
<div class="instruction">
<span class="speaker-icon" onclick="playInstruction(this)">ğŸ”Š</span>
<span id="question-text-1">How many? Touch as you count.</span>
</div>
<div class="objects-container" id="objects-1">
<!-- Objects will be generated here -->
</div>
<div class="answer-container">
<div class="answer-prompt">How many did you count?</div>
<div class="number-options" id="options-1">
<!-- Number buttons will be generated here -->
</div>
</div>
<button class="submit-button" onclick="submitAnswer(1)">Submit</button>
<div class="feedback-message" id="feedback-1"></div>
<div class="level-complete" id="complete-1">
<h2>ğŸ‰ Level 1 Complete!</h2>
<p>Great counting! Ready for more?</p>
<button class="next-level-button" onclick="nextLevel()">Go to Level 2</button>
</div>
</div>
<!-- Level 2: Count 1-5 -->
<div class="activity-card" data-level="2" data-max="5">
<div class="level-badge">LEVEL 2: Count up to 5</div>
<div class="instruction">
<span class="speaker-icon" onclick="playInstruction(this)">ğŸ”Š</span>
<span id="question-text-2">How many? Touch as you count.</span>
</div>
<div class="objects-container" id="objects-2">
<!-- Objects will be generated here -->
</div>
<div class="answer-container">
<div class="answer-prompt">How many did you count?</div>
<div class="number-options" id="options-2">
<!-- Number buttons will be generated here -->
</div>
</div>
<button class="submit-button" onclick="submitAnswer(2)">Submit</button>
<div class="feedback-message" id="feedback-2"></div>
<div class="level-complete" id="complete-2">
<h2>ğŸ‰ Level 2 Complete!</h2>
<p>Excellent work! Keep going!</p>
<button class="next-level-button" onclick="nextLevel()">Go to Level 3</button>
</div>
</div>
<!-- Level 3: Count 1-8 -->
<div class="activity-card" data-level="3" data-max="8">
<div class="level-badge">LEVEL 3: Count up to 8</div>
<div class="instruction">
<span class="speaker-icon" onclick="playInstruction(this)">ğŸ”Š</span>
<span id="question-text-3">How many? Touch as you count.</span>
</div>
<div class="objects-container" id="objects-3">
<!-- Objects will be generated here -->
</div>
<div class="answer-container">
<div class="answer-prompt">How many did you count?</div>
<div class="number-options" id="options-3">
<!-- Number buttons will be generated here -->
</div>
</div>
<button class="submit-button" onclick="submitAnswer(3)">Submit</button>
<div class="feedback-message" id="feedback-3"></div>
<div class="level-complete" id="complete-3">
<h2>ğŸ‰ Level 3 Complete!</h2>
<p>Amazing! One more level to go!</p>
<button class="next-level-button" onclick="nextLevel()">Go to Level 4</button>
</div>
</div>
<!-- Level 4: Count 1-10 -->
<div class="activity-card" data-level="4" data-max="10">
<div class="level-badge">LEVEL 4: Count up to 10</div>
<div class="instruction">
<span class="speaker-icon" onclick="playInstruction(this)">ğŸ”Š</span>
<span id="question-text-4">How many? Touch as you count.</span>
</div>
<div class="objects-container" id="objects-4">
<!-- Objects will be generated here -->
</div>
<div class="answer-container">
<div class="answer-prompt">How many did you count?</div>
<div class="number-options" id="options-4">
<!-- Number buttons will be generated here -->
</div>
</div>
<button class="submit-button" onclick="submitAnswer(4)">Submit</button>
<div class="feedback-message" id="feedback-4"></div>
<div class="level-complete" id="complete-4">
<h2>ğŸ‰ Level 4 Complete!</h2>
<p>You've mastered counting!</p>
<button class="next-level-button" onclick="showCompletion()">Finish</button>
</div>
</div>
<!-- Final Completion Message -->
<div class="completion-message">
<h1>ğŸ† Congratulations!</h1>
<p>You've completed all counting levels!</p>
<p style="margin-top: 20px; font-size: 20px;">ğŸŒŸ You're a counting star! ğŸŒŸ</p>
</div>
</div>
<script>
        // Object emojis to use for counting
        const objectEmojis = [
            'ğŸˆ', 'ğŸ', 'ğŸŠ', 'ğŸŒ', 'ğŸ“', 'ğŸ¥',
            'âš½', 'ğŸ€', 'âš¾', 'ğŸ¾', 'ğŸ¥', 'ğŸ',
            'ğŸ¶', 'ğŸ±', 'ğŸ­', 'ğŸ¹', 'ğŸ°', 'ğŸ»',
            'âœï¸', 'ğŸ“–', 'ğŸ–ï¸', 'âœ‚ï¸', 'ğŸ“Œ', 'ğŸ“',
            'ğŸ’', 'ğŸ§¢', 'ğŸ©', 'ğŸ‘’',
            'ğŸš—', 'ğŸš•', 'ğŸš™', 'ğŸšŒ', 'ğŸš', 'ğŸï¸',
            'â­', 'ğŸ’«', 'ğŸŒŸ', 'ğŸ’', 'ğŸ'
        ];

        const objectNames = {
            'ğŸˆ': 'balloons',
            'ğŸ': 'apples',
            'ğŸŠ': 'oranges',
            'ğŸŒ': 'bananas',
            'ğŸ¥': 'kiwis',
            'ğŸ“': 'strawberries',
            'âš½': 'soccer balls',
            'ğŸ€': 'basketballs',
            'âš¾': 'baseballs',
            'ğŸ¾': 'tennis balls',
            'ğŸ¥': 'softballs',
            'ğŸ': 'volleyballs',
            'ğŸ¶': 'dogs',
            'ğŸ±': 'cats',
            'ğŸ­': 'mice',
            'ğŸ¹': 'hamsters',
            'ğŸ°': 'rabbits',
            'ğŸ»': 'bears',
            'âœï¸': 'pencils',
            'ğŸ“–': 'books',
            'ğŸ–ï¸': 'crayons',
            'âœ‚ï¸': 'scissors',
            'ğŸ“Œ': 'pins',
            'ğŸ“': 'paperclips',
            'ğŸ’': 'backpacks',
            'ğŸ§¢': 'caps',
            'ğŸ©': 'hats',
            'ğŸ‘’': 'sun hats',
            'ğŸš—': 'cars',
            'ğŸš•': 'taxis',
            'ğŸš™': 'SUVs',
            'ğŸšŒ': 'buses',
            'ğŸš': 'trolleys',
            'ğŸï¸': 'race cars',
            'â­': 'stars',
            'ğŸ’«': 'dizzy stars',
            'ğŸŒŸ': 'glowing stars',
            'ğŸ’': 'gift hearts',
            'ğŸ': 'gifts'
        };

        let currentLevel = 1;
        let levelTracking = {
            1: {}, // Will store count of correct answers for each number
            2: {},
            3: {},
            4: {}
        };
        let lastQuestion = {
            number: null,
            count: 0
        };

        let currentQuestion = {
            level: 1,
            correctAnswer: 0,
            countedObjects: 0,
            selectedAnswer: null,
            objectEmoji: ''
        };

        // Function to speak feedback messages
        function speakFeedback(message) {
            window.speechSynthesis.cancel();
            const cleanMessage = message.replace(/[^\w\s!?.,']/g, '');
            const utterance = new SpeechSynthesisUtterance(cleanMessage);
            utterance.rate = 0.9;
            utterance.pitch = 1.1;
            window.speechSynthesis.speak(utterance);
        }

        function initializeLevel(level) {
            const card = document.querySelector(`.activity-card[data-level="${level}"]`);
            const maxNum = parseInt(card.dataset.max);
            
            // Initialize tracking for this level
            levelTracking[level] = {};
            for (let i = 1; i <= maxNum; i++) {
                levelTracking[level][i] = 0;
            }
            
            // Reset consecutive question tracking
            lastQuestion = {
                number: null,
                count: 0
            };
            
            generateQuestion(level);
            generateNumberOptions(level);
        }

        function generateQuestion(level) {
            const card = document.querySelector(`.activity-card[data-level="${level}"]`);
            const maxNum = parseInt(card.dataset.max);
            
            // Random number of objects to count, avoiding 3 consecutive same numbers
            let count;
            if (lastQuestion.count >= 2 && lastQuestion.number !== null) {
                // If same number appeared twice, exclude it this time
                do {
                    count = Math.floor(Math.random() * maxNum) + 1;
                } while (count === lastQuestion.number);
                lastQuestion.number = count;
                lastQuestion.count = 1;
            } else {
                count = Math.floor(Math.random() * maxNum) + 1;
                if (count === lastQuestion.number) {
                    lastQuestion.count++;
                } else {
                    lastQuestion.number = count;
                    lastQuestion.count = 1;
                }
            }
            
            // Random object emoji
            const randomEmoji = objectEmojis[Math.floor(Math.random() * objectEmojis.length)];
            const objectName = objectNames[randomEmoji] || 'items';
            
            currentQuestion = {
                level: level,
                correctAnswer: count,
                countedObjects: 0,
                selectedAnswer: null,
                objectEmoji: randomEmoji
            };
            
            // Update question text
            const questionText = document.getElementById(`question-text-${level}`);
            questionText.textContent = `How many ${objectName} are there? Touch as you count.`;
            
            // Generate objects
            const container = document.getElementById(`objects-${level}`);
            container.innerHTML = '';
            
            for (let i = 0; i < count; i++) {
                const wrapper = document.createElement('div');
                wrapper.className = 'object-wrapper';
                wrapper.innerHTML = `
                    <div class="object">${randomEmoji}</div>
                    <div class="count-number"></div>
                `;
                wrapper.onclick = function() {
                    countObject(this, level);
                };
                container.appendChild(wrapper);
            }
            
            // Reset feedback and selection
            const feedback = document.getElementById(`feedback-${level}`);
            feedback.classList.remove('show');
            
            document.querySelectorAll(`#options-${level} .number-button`).forEach(btn => {
                btn.classList.remove('selected');
            });
        }

        function generateNumberOptions(level) {
            const card = document.querySelector(`.activity-card[data-level="${level}"]`);
            const maxNum = parseInt(card.dataset.max);
            const container = document.getElementById(`options-${level}`);
            
            container.innerHTML = '';
            
            for (let i = 1; i <= maxNum; i++) {
                const button = document.createElement('button');
                button.className = 'number-button';
                button.textContent = i;
                button.onclick = function() {
                    selectAnswer(this, i, level);
                };
                container.appendChild(button);
            }
        }

        function countObject(wrapper, level) {
            if (wrapper.classList.contains('counted')) return;
            
            currentQuestion.countedObjects++;
            wrapper.classList.add('counted');
            
            // Display the count number in order of clicking
            const countNumberDiv = wrapper.querySelector('.count-number');
            countNumberDiv.textContent = currentQuestion.countedObjects;
            
            // Cancel any ongoing speech and play counting sound immediately
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(currentQuestion.countedObjects.toString());
            utterance.rate = 0.8;
            utterance.pitch = 1.2;
            window.speechSynthesis.speak(utterance);
        }

        function selectAnswer(button, number, level) {
            // Remove selection from all buttons
            document.querySelectorAll(`#options-${level} .number-button`).forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Select clicked button
            button.classList.add('selected');
            currentQuestion.selectedAnswer = number;
        }

        function submitAnswer(level) {
            const feedback = document.getElementById(`feedback-${level}`);
            
            feedback.classList.remove('show', 'correct', 'wrong');
            
            if (currentQuestion.selectedAnswer === null) {
                feedback.textContent = 'âš ï¸ Please select a number first!';
                feedback.classList.add('show', 'wrong');
                return;
            }
            
            if (currentQuestion.selectedAnswer === currentQuestion.correctAnswer) {
                const correctMessages = [
                    'ğŸ‰ Great job!',
                    'â­ Well done!',
                    'ğŸŒŸ Excellent!',
                    'ğŸ‘ Congrats!',
                    'âœ¨ Perfect!',
                    'ğŸŠ Fantastic!'
                ];
                const randomMessage = correctMessages[Math.floor(Math.random() * correctMessages.length)];
                feedback.textContent = randomMessage;
                speakFeedback(feedback.textContent);
                feedback.classList.add('show', 'correct');
                
                // Increment count for this specific number
                levelTracking[level][currentQuestion.correctAnswer]++;
                
                // Check if all numbers have been counted twice
                if (checkLevelComplete(level)) {
                    setTimeout(() => {
                        feedback.classList.remove('show');
                        document.getElementById(`complete-${level}`).classList.add('show');
                    }, 1500);
                } else {
                    setTimeout(() => {
                        generateQuestion(level);
                        feedback.classList.remove('show');
                    }, 2000);
                }
            } else {
                const wrongMessages = [
                    'ğŸ˜Š Oops! Try again!',
                    'ğŸ”„ Not quite! Try again!',
                    'ğŸ’­ Think again!',
                    'ğŸ¯ Try once more!'
                ];
                const randomMessage = wrongMessages[Math.floor(Math.random() * wrongMessages.length)];
                feedback.textContent = randomMessage;
                speakFeedback(feedback.textContent);
                feedback.classList.add('show', 'wrong');
                
                setTimeout(() => {
                    generateQuestion(level);
                    feedback.classList.remove('show');
                }, 2000);
            }
        }

        function checkLevelComplete(level) {
            const tracking = levelTracking[level];
            // Check if all numbers have been counted at least twice
            for (let num in tracking) {
                if (tracking[num] < 2) {
                    return false;
                }
            }
            return true;
        }

        function playInstruction(icon) {
            const card = icon.closest('.activity-card');
            const level = parseInt(card.dataset.level);
            const questionText = document.getElementById(`question-text-${level}`).textContent;
            
            const utterance = new SpeechSynthesisUtterance(questionText);
            utterance.rate = 0.8;
            utterance.pitch = 1.1;
            window.speechSynthesis.speak(utterance);
        }

        function nextLevel() {
            const currentCard = document.querySelector('.activity-card.active');
            const nextLevelNum = currentLevel + 1;
            const nextCard = document.querySelector(`.activity-card[data-level="${nextLevelNum}"]`);
            
            if (nextCard) {
                currentCard.classList.remove('active');
                nextCard.classList.add('active');
                currentLevel = nextLevelNum;
                initializeLevel(currentLevel);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function showCompletion() {
            const currentCard = document.querySelector('.activity-card.active');
            const completionMessage = document.querySelector('.completion-message');
            
            currentCard.classList.remove('active');
            completionMessage.classList.add('show');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize first level
        initializeLevel(1);
    </script>
</body>
</html>
