<!DOCTYPE html>

<html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TCBV2GCV');</script>
    <!-- End Google Tag Manager -->
    
    
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Put Numbers in Order</title>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', cursive;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            touch-action: manipulation;
        }

        .game-container {
            background: linear-gradient(to bottom, #ffffff 0%, #f8f9ff 100%);
            border-radius: 35px;
            padding: 45px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.35);
            max-width: 1100px;
            width: 100%;
            text-align: center;
            border: 3px solid rgba(255, 255, 255, 0.5);
        }

        h1 {
            color: #667eea;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .instruction {
            font-size: 1.5em;
            color: #2d3436;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .challenge-number {
            font-size: 1.3em;
            color: #764ba2;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .frames-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 40px;
            margin-bottom: 40px;
        }

        .frame-label {
            font-size: 1.2em;
            color: #2d3436;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .ten-frame {
            display: grid;
            grid-template-columns: repeat(10, 90px);
            gap: 0;
            border: 5px solid #2d3436;
            background: white;
            padding: 0;
        }

        .frame-cell {
            width: 90px;
            height: 90px;
            border: 4px solid #2d3436;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
            font-weight: bold;
            background: white;
            transition: all 0.3s ease;
        }

        .frame-cell.drop-zone {
            background: linear-gradient(135deg, #e8edff 0%, #f0f3ff 100%);
        }

        .frame-cell.drop-zone.drag-over {
            background: linear-gradient(135deg, #d4e0ff 0%, #e8edff 100%);
            transform: scale(1.05);
            box-shadow: inset 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .frame-cell.filled {
            background: linear-gradient(135deg, #d5f4e6 0%, #a8e6cf 100%);
        }

        .number-tile {
            width: 65px;
            height: 65px;
            background: linear-gradient(135deg, #4A90E2 0%, #2E5C8A 100%);
            color: white;
            font-size: 1.5em;
            font-weight: normal;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: grab;
            border-radius: 50%;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
            transition: all 0.3s ease;
            touch-action: none;
        }

        .number-tile:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.35);
        }

        .number-tile.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }

        .number-tile.placed {
            visibility: hidden;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        button {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 1.4em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', cursive;
        }

        button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        button:disabled {
            background: #b2bec3;
            cursor: not-allowed;
            transform: none;
        }

        .feedback {
            font-size: 2em;
            font-weight: bold;
            margin: 20px 0;
            min-height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .feedback.correct {
            color: #00b894;
        }

        .feedback.incorrect {
            color: #d63031;
        }

        .final-screen {
            display: none;
        }

        .final-screen.show {
            display: block;
        }

        .celebration {
            font-size: 5em;
            margin: 30px 0;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .hint-hand {
            position: fixed;
            font-size: 3em;
            z-index: 2000;
            animation: pointDown 1s ease-in-out infinite;
            pointer-events: none;
            display: none;
        }

        @keyframes pointDown {
            0%, 100% { transform: translateY(0) rotate(-30deg); }
            50% { transform: translateY(10px) rotate(-30deg); }
        }

        .home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            color: #667eea;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 800px;
            font-size: 26px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .home-button:hover {
            transform: translateY(-2px);
            background: #667eea;
            color: white;
        }

        @media (max-width: 1024px) {
            .ten-frame {
                grid-template-columns: repeat(10, 70px);
            }

            .frame-cell {
                width: 70px;
                height: 70px;
                font-size: 1.8em;
            }

            .number-tile {
                width: 50px;
                height: 50px;
                font-size: 1.3em;
                font-weight: normal;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .instruction {
                font-size: 1.2em;
            }

            .ten-frame {
                grid-template-columns: repeat(10, 55px);
            }

            .frame-cell {
                width: 55px;
                height: 55px;
                font-size: 1.4em;
                border: 3px solid #2d3436;
            }

            .number-tile {
                width: 40px;
                height: 40px;
                font-size: 1.1em;
                font-weight: normal;
            }

            .game-container {
                padding: 25px;
            }

            button {
                padding: 15px 30px;
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TCBV2GCV"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    
<button class="home-button" onclick="window.location.href='../grade-1-math-index.html'">üè† Home</button>
<div class="hint-hand" id="hintHand">üëá</div>
<div class="game-container">
<div id="gameScreen">
<h1>üî¢ Put Numbers in Order</h1>
<p class="instruction">Drag the numbers to arrange them in correct order!</p>
<div class="challenge-number" id="challengeNumber">Challenge 1 of 5</div>
<div class="frames-container">
<!-- Top Frame - Drop Zone -->
<div>
<div class="frame-label">üëÜ Drag numbers here in order:</div>
<div class="ten-frame" id="topFrame">
<!-- Will be filled with drop zones -->
</div>
</div>
<!-- Bottom Frame - Source -->
<div>
<div class="frame-label">üëá Numbers to arrange:</div>
<div class="ten-frame" id="bottomFrame">
<!-- Will be filled with draggable numbers -->
</div>
</div>
</div>
<div class="feedback" id="feedback"></div>
<div class="controls">
<button disabled="" id="undoBtn" onclick="undoLastMove()" style="background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);">‚Ü©Ô∏è Undo</button>
<button disabled="" id="checkBtn" onclick="checkAnswer()">Check Answer</button>
<button id="nextBtn" onclick="nextChallenge()" style="display: none;">Next Challenge</button>
</div>
</div>
<!-- Hint Hand for Pattern Challenges -->
<div class="hint-hand" id="hintHand">üëâ</div>
<div class="final-screen" id="finalScreen">
<div class="celebration">üéâüåüüéä</div>
<h1>Congratulations!</h1>
<p style="font-size: 2em; margin: 30px 0; color: #2d3436;">
                You completed all 8 challenges!
            </p>
<p style="font-size: 1.5em; color: #00b894; font-weight: bold;">
                You're a Number Ordering Expert! üèÜ
            </p>
<div class="controls" style="margin-top: 40px;">
<button onclick="location.reload()">Play Again</button>
<button onclick="window.location.href='../math-index.html'" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    Back to Activities
                </button>
</div>
</div>
</div>
<script>
        let currentChallenge = 1;
        const totalChallenges = 8;
        let currentNumbers = [];
        let isChecking = false;
        let draggedElement = null;
        let touchElement = null;
        let touchClone = null;
        let moveHistory = []; // Track moves for undo

        // Challenge configurations: [type, givenNumbers array]
        // type: "empty" = all blank, "partial" = some numbers pre-filled, "pattern" = find the pattern
        const challenges = [
            // Level 1: Empty frames (Challenges 1-2)
            { type: "empty", numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] },
            { type: "empty", numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] },
            
            // Level 2: Partial frames (Challenges 3-5)
            { type: "partial", numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], given: [1, 4, 5, 8] },
            { type: "partial", numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], given: [2, 5, 1, 4, 3] },
            { type: "partial", numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], given: [8, 3, 5, 7, 4, 6] },
            
            // Level 3: Pattern recognition - Counting backward from the right (like worksheet)
            { type: "pattern", numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], given: [1, 2, 5], instruction: "Count backward! Start from the right." },  // Challenge 6: Given 1,2,5
            { type: "pattern", numbers: [5, 6, 7, 8, 9, 10], given: [5, 8], instruction: "Count backward! Start from the right." },  // Challenge 7: Given 5,8
            { type: "pattern", numbers: [3, 4, 5, 6, 7], given: [3, 6], instruction: "Count backward! Start from the right." }  // Challenge 8: Given 3,6
        ];

        function playAudio(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.9;
            utterance.pitch = 1.2;
            utterance.volume = 1.0;
            window.speechSynthesis.speak(utterance);
        }

        function playBeep() {
            // Create a simple beep sound
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800; // Frequency in Hz
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        function showHintHand(targetElement) {
            const hintHand = document.getElementById('hintHand');
            const rect = targetElement.getBoundingClientRect();
            
            hintHand.style.left = (rect.left + rect.width / 2 - 25) + 'px';
            hintHand.style.top = (rect.top - 60) + 'px';
            hintHand.style.display = 'block';
            
            // Hide after 3 seconds
            setTimeout(() => {
                hintHand.style.display = 'none';
            }, 3000);
        }

        function getExpectedNextNumber(challenge) {
            // For pattern challenges, count backward from the highest number
            // Return the next number that should be placed
            
            const allNumbers = challenge.numbers;
            const givenNumbers = challenge.given || [];
            
            // Get the highest number in the sequence
            const maxNumber = Math.max(...allNumbers);
            
            // Start from the highest and work backward
            for (let i = maxNumber; i >= Math.min(...allNumbers); i--) {
                // Skip if it's already given (pre-filled)
                if (givenNumbers.includes(i)) {
                    continue;
                }
                
                // Check if this number has already been placed
                const alreadyPlaced = moveHistory.some(move => parseInt(move.number) === i);
                
                if (!alreadyPlaced) {
                    // This is the next number that should be placed
                    return i;
                }
            }
            
            return null; // All numbers placed
        }

        function generateChallenge() {
            isChecking = false;
            moveHistory = []; // Reset move history
            document.getElementById('feedback').textContent = '';
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('checkBtn').style.display = 'inline-block'; // Make sure it's visible
            document.getElementById('undoBtn').disabled = true; // Disable undo button
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('challengeNumber').textContent = `Challenge ${currentChallenge} of ${totalChallenges}`;

            const challenge = challenges[currentChallenge - 1];
            currentNumbers = challenge.numbers;

            // Update instruction if pattern challenge
            const instructionElement = document.querySelector('.instruction');
            if (challenge.type === 'pattern' && challenge.instruction) {
                instructionElement.textContent = challenge.instruction;
                instructionElement.style.color = '#e17055';
                instructionElement.style.fontWeight = 'bold';
            } else {
                instructionElement.textContent = 'Drag the numbers to arrange them in correct order!';
                instructionElement.style.color = '#2d3436';
            }

            createFrames(challenge);
        }

        function createFrames(challenge) {
            const topFrame = document.getElementById('topFrame');
            const bottomFrame = document.getElementById('bottomFrame');
            
            topFrame.innerHTML = '';
            bottomFrame.innerHTML = '';

            // Determine which numbers need to be placed
            let numbersToPlace = [];
            let givenNumbers = challenge.given || [];
            
            if (challenge.type === 'partial' || challenge.type === 'pattern') {
                // Only need to place numbers that aren't already given
                numbersToPlace = currentNumbers.filter(num => !givenNumbers.includes(num));
            } else {
                // Empty frame - need to place all numbers
                numbersToPlace = [...currentNumbers];
            }

            // Determine how many boxes to show (based on sequence length, not always 10)
            const totalBoxes = currentNumbers.length;

            // Create top frame with drop zones and pre-filled numbers
            for (let i = 0; i < totalBoxes; i++) {
                const cell = document.createElement('div');
                cell.className = 'frame-cell';
                
                const expectedNumber = currentNumbers[i];
                
                // Check if this position should be pre-filled
                if ((challenge.type === 'partial' || challenge.type === 'pattern') && givenNumbers.includes(expectedNumber)) {
                    // Pre-fill this cell
                    cell.classList.add('filled');
                    const preFilled = document.createElement('div');
                    preFilled.className = 'number-tile';
                    preFilled.textContent = expectedNumber;
                    preFilled.style.cursor = 'default';
                    preFilled.dataset.number = expectedNumber;
                    cell.appendChild(preFilled);
                } else {
                    // Make it a drop zone
                    cell.classList.add('drop-zone');
                    cell.dataset.position = i;
                    cell.dataset.expectedNumber = expectedNumber;
                    
                    // Desktop drag events
                    cell.addEventListener('dragover', handleDragOver);
                    cell.addEventListener('dragleave', handleDragLeave);
                    cell.addEventListener('drop', handleDrop);
                }
                
                topFrame.appendChild(cell);
            }

            // Create bottom frame with shuffled numbers (only the ones that need to be placed)
            const shuffled = [...numbersToPlace].sort(() => Math.random() - 0.5);
            
            for (let i = 0; i < totalBoxes; i++) {
                const cell = document.createElement('div');
                cell.className = 'frame-cell';
                
                if (i < shuffled.length) {
                    const tile = document.createElement('div');
                    tile.className = 'number-tile';
                    tile.textContent = shuffled[i];
                    tile.dataset.number = shuffled[i];
                    tile.draggable = true;
                    
                    // Desktop drag events
                    tile.addEventListener('dragstart', handleDragStart);
                    tile.addEventListener('dragend', handleDragEnd);
                    
                    // Touch events
                    tile.addEventListener('touchstart', handleTouchStart, {passive: false});
                    tile.addEventListener('touchmove', handleTouchMove, {passive: false});
                    tile.addEventListener('touchend', handleTouchEnd);
                    
                    cell.appendChild(tile);
                }
                
                bottomFrame.appendChild(cell);
            }
        }

        // Desktop drag and drop handlers
        function handleDragStart(e) {
            if (isChecking) return;
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.dataset.number);
            
            // Play number audio
            playAudio(this.dataset.number);
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
        }

        function handleDragOver(e) {
            if (isChecking) return;
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            this.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (isChecking) return;
            e.preventDefault();
            this.classList.remove('drag-over');
            
            // Don't allow if already filled
            if (this.querySelector('.number-tile')) {
                return;
            }
            
            const number = parseInt(e.dataTransfer.getData('text/html'));
            
            // Check if this is a pattern challenge and validate backward order
            const challenge = challenges[currentChallenge - 1];
            if (challenge.type === 'pattern') {
                const expectedNext = getExpectedNextNumber(challenge);
                
                if (expectedNext !== null && number !== expectedNext) {
                    // Wrong number - play beep and show hint
                    playBeep();
                    
                    // Find the tile with the expected number in the bottom frame
                    const bottomTiles = document.querySelectorAll('#bottomFrame .number-tile');
                    bottomTiles.forEach(tile => {
                        if (parseInt(tile.dataset.number) === expectedNext) {
                            showHintHand(tile);
                        }
                    });
                    
                    // Don't place the tile
                    return;
                }
            }
            
            // Create new tile in drop zone
            const newTile = draggedElement.cloneNode(true);
            newTile.draggable = false;
            newTile.style.cursor = 'default';
            this.appendChild(newTile);
            this.classList.add('filled');
            
            // Track move for undo
            moveHistory.push({
                dropZone: this,
                originalTile: draggedElement,
                number: number
            });
            
            // Hide original tile
            draggedElement.classList.add('placed');
            
            // Enable undo button
            document.getElementById('undoBtn').disabled = false;
            
            checkIfComplete();
        }

        // Touch event handlers
        function handleTouchStart(e) {
            if (isChecking) return;
            e.preventDefault();
            touchElement = this;
            this.classList.add('dragging');
            
            // Play number audio
            playAudio(this.dataset.number);
            
            // Create clone for visual feedback
            touchClone = this.cloneNode(true);
            touchClone.style.position = 'fixed';
            touchClone.style.pointerEvents = 'none';
            touchClone.style.zIndex = '1000';
            touchClone.style.opacity = '0.8';
            touchClone.style.width = '65px';
            touchClone.style.height = '65px';
            document.body.appendChild(touchClone);
            
            const touch = e.touches[0];
            touchClone.style.left = (touch.clientX - 32.5) + 'px';
            touchClone.style.top = (touch.clientY - 32.5) + 'px';
        }

        function handleTouchMove(e) {
            if (!touchElement || isChecking) return;
            e.preventDefault();
            
            const touch = e.touches[0];
            if (touchClone) {
                touchClone.style.left = (touch.clientX - 32.5) + 'px';
                touchClone.style.top = (touch.clientY - 32.5) + 'px';
            }
            
            // Highlight drop zone under touch
            const dropZones = document.querySelectorAll('.drop-zone');
            dropZones.forEach(zone => {
                const rect = zone.getBoundingClientRect();
                if (touch.clientX >= rect.left && touch.clientX <= rect.right &&
                    touch.clientY >= rect.top && touch.clientY <= rect.bottom) {
                    zone.classList.add('drag-over');
                } else {
                    zone.classList.remove('drag-over');
                }
            });
        }

        function handleTouchEnd(e) {
            if (!touchElement || isChecking) return;
            e.preventDefault();
            
            touchElement.classList.remove('dragging');
            
            if (touchClone) {
                document.body.removeChild(touchClone);
                touchClone = null;
            }
            
            const touch = e.changedTouches[0];
            const dropZones = document.querySelectorAll('.drop-zone');
            
            let dropped = false;
            dropZones.forEach(zone => {
                zone.classList.remove('drag-over');
                
                if (!dropped && !zone.querySelector('.number-tile')) {
                    const rect = zone.getBoundingClientRect();
                    if (touch.clientX >= rect.left && touch.clientX <= rect.right &&
                        touch.clientY >= rect.top && touch.clientY <= rect.bottom) {
                        
                        // Check if this is a pattern challenge and validate backward order
                        const challenge = challenges[currentChallenge - 1];
                        const number = parseInt(touchElement.dataset.number);
                        
                        if (challenge.type === 'pattern') {
                            const expectedNext = getExpectedNextNumber(challenge);
                            
                            if (expectedNext !== null && number !== expectedNext) {
                                // Wrong number - play beep and show hint
                                playBeep();
                                
                                // Find the tile with the expected number in the bottom frame
                                const bottomTiles = document.querySelectorAll('#bottomFrame .number-tile');
                                bottomTiles.forEach(tile => {
                                    if (parseInt(tile.dataset.number) === expectedNext) {
                                        showHintHand(tile);
                                    }
                                });
                                
                                // Don't place the tile
                                dropped = true;
                                touchElement = null;
                                return;
                            }
                        }
                        
                        // Create tile in drop zone
                        const newTile = touchElement.cloneNode(true);
                        newTile.draggable = false;
                        newTile.style.cursor = 'default';
                        zone.appendChild(newTile);
                        zone.classList.add('filled');
                        
                        // Track move for undo
                        moveHistory.push({
                            dropZone: zone,
                            originalTile: touchElement,
                            number: touchElement.dataset.number
                        });
                        
                        // Hide original
                        touchElement.classList.add('placed');
                        
                        // Enable undo button
                        document.getElementById('undoBtn').disabled = false;
                        
                        dropped = true;
                        checkIfComplete();
                    }
                }
            });
            
            touchElement = null;
        }

        function undoLastMove() {
            if (moveHistory.length === 0) return;
            
            // Get the last move
            const lastMove = moveHistory.pop();
            
            // Remove the tile from drop zone
            const tileInDropZone = lastMove.dropZone.querySelector('.number-tile');
            if (tileInDropZone) {
                lastMove.dropZone.removeChild(tileInDropZone);
            }
            lastMove.dropZone.classList.remove('filled');
            
            // Show the original tile in bottom frame
            lastMove.originalTile.classList.remove('placed');
            
            // Disable undo button if no more moves
            if (moveHistory.length === 0) {
                document.getElementById('undoBtn').disabled = true;
            }
            
            // Disable check button since not complete
            document.getElementById('checkBtn').disabled = true;
        }

        function checkIfComplete() {
            const dropZones = document.querySelectorAll('.drop-zone');
            let allFilled = true;
            
            dropZones.forEach(zone => {
                if (!zone.querySelector('.number-tile')) {
                    allFilled = false;
                }
            });
            
            if (allFilled) {
                document.getElementById('checkBtn').disabled = false;
                document.getElementById('checkBtn').style.display = 'inline-block';
            } else {
                document.getElementById('checkBtn').disabled = true;
            }
        }

        function checkAnswer() {
            if (isChecking) return;
            isChecking = true;
            
            const dropZones = document.querySelectorAll('.drop-zone');
            let allCorrect = true;
            
            dropZones.forEach(zone => {
                const tile = zone.querySelector('.number-tile');
                const expectedNumber = parseInt(zone.dataset.expectedNumber);
                const actualNumber = parseInt(tile.dataset.number);
                
                if (actualNumber !== expectedNumber) {
                    allCorrect = false;
                    zone.style.background = '#ffcccc';
                } else {
                    zone.style.background = '#d5f4e6';
                }
            });
            
            const feedback = document.getElementById('feedback');
            
            if (allCorrect) {
                feedback.textContent = 'üéâ Perfect! Well Done!';
                feedback.className = 'feedback correct';
                playAudio('Well done! Perfect!');
                
                document.getElementById('checkBtn').style.display = 'none';
                
                if (currentChallenge < totalChallenges) {
                    document.getElementById('nextBtn').style.display = 'inline-block';
                } else {
                    setTimeout(showFinalScreen, 2000);
                }
            } else {
                feedback.textContent = '‚ùå Not quite right. Try again!';
                feedback.className = 'feedback incorrect';
                playAudio('Oops, try again!');
                
                // Reset after 2 seconds
                setTimeout(() => {
                    generateChallenge();
                }, 2000);
            }
        }

        function nextChallenge() {
            currentChallenge++;
            generateChallenge();
        }

        function showFinalScreen() {
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('finalScreen').classList.add('show');
            playAudio('Congratulations! You completed all challenges! You are a number ordering expert!');
        }

        // Initialize game
        generateChallenge();
    </script>
</body>
</html>
